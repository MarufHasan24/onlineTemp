<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=1">

<head>
    <title>Checkmate</title>
    <link rel="stylesheet" href="./assets/styles/common.css">
    <link rel="stylesheet" href="./assets/styles/index.css">
    <style>

    </style>
    <script src="./assets/scripts/tools.js"></script>
</head>

<body>
    <iframe src="./background.html" frameborder="0"></iframe>
    <header>
        <nav id="nav-container"></nav>
    </header>
    <main>
        <nav id="app">
            <div class="container" id="container">
                <div class="form-container sign-in-container">
                    <form action="#">
                        <h1>New compitition</h1>
                        <select id="list">
                        </select>
                        <h3>wiki porject name</h3><input type="text" id="customLangcode"
                            placeholder="Type or select a language code">
                        <div class="project"><select id="langcode" name="langcode" onchange="updateInput(this.value)">
                                <option value="">-- Select a language code --</option>
                                <option value="species">species</option>
                                <option value="www">www</option>
                                <option value="commons">commons</option>
                                <option value="meta">meta</option>
                            </select><select name="porject" id="project">
                                <option value="wikipedia">wikipedia</option>
                                <option value="wikiquote">wikiquote</option>
                                <option value="wiktionary">wiktionary</option>
                                <option value="wikivoyage">wikivoyage</option>
                                <option value="wikibooks">wikibooks</option>
                                <option value="mediawiki">mediawiki</option>
                                <option value="wikidata">wikidata</option>
                                <option value="wikinews">wikinews</option>
                                <option value="wikisource">wikisource</option>
                                <option value="wikimedia">wikimedia</option>
                                <option value="wikiversity">wikiversity</option>
                            </select></div>

                        <input type="text" id="hostname" placeholder="Name" />
                        <button id="host">Host</button>
                    </form>
                </div>
                <div class="form-container sign-up-container">
                    <form action="#">
                        <h1>Find Compitittion</h1>
                        <input id="searchkey" type="email" placeholder="key" />
                        <input id="searchname" type="text" placeholder="name" />
                        <button id="search">Search</button>
                    </form>
                </div>
                <div class="overlay-container">
                    <div class="overlay">
                        <div class="overlay-panel overlay-left">
                            <h1>Welcome Back!</h1>
                            <p>Provide key or name or both to find out your compition which is already hosted</p>
                            <button class="ghost" id="signIn">Host new Compititon</button>
                        </div>
                        <div class="overlay-panel overlay-right">
                            <h1>Hello, <%= user.displayName %>
                            </h1>
                            <p>Provide required information and host a compition using listed templates</p>
                            <button class="ghost" id="signUp">Search your compitition</button>
                        </div>
                    </div>
                </div>
            </div>
        </nav>
        </nav>
    </main>
    <footer>
        <p><b>&copy;2024</b> For any needs, you can contact me on my <a
                href=" https://meta.wikimedia.org/wiki/User_talk:মোহাম্মদ_মারুফ">Talk page</a></p>
    </footer>
</body>
<script>
    function updateInput(value) {
        document.getElementById('customLangcode').value = value;
    }

    document.getElementById('customLangcode').addEventListener('input', function () {
        document.getElementById('langcode').value = "";
    });
    document.querySelector("#host").onclick = (e) => {
        e.preventDefault();
        let langcode = document.querySelector("#customLangcode").value;
        let project = document.querySelector("#project").value;
        let projecturl = langcode + "." + project;
        checkWikimediaAPI(projecturl, function (isValid) {
            //console.log(isValid)
        })
    }
    // Example usage
    function checkWikimediaAPI(projecturl, callback) {
        const url = `https://${projecturl}.org/w/api.php?action=query&meta=siteinfo&format=json&origin=*`;

        fetch(url)
            .then(response => {
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return response.json();
            })
            .then(data => {
                if (data && data.query && data.query.general) {
                    // Valid API
                    callback(true);
                } else {
                    // Invalid API
                    callback(false);
                }
            })
            .catch(error => {
                callback(false); // In case of any error, consider it invalid
            });
    }


</script>

</html>