<!DOCTYPE html>
<!--Code created by Maruf hasan-->
<!--Date: 22 August, 2024-->
<html>
<meta name="author" content="Maruf hasan" />
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
<meta content="width=device-width, initial-scale=1" name="viewport" />

<head>
    <title>Dashboard</title>
    <link rel="stylesheet" href="./assets/styles/common.css">
    <link rel="stylesheet" href="./assets/styles/dashboard.css">
    <!-- <script src="./assets/scripts/tools.js"></script> -->
    <header>
        <h1>Welcome to Dashboard</h1>
        <ul class="menu">
            <li><a href="/">Home</a></li>
            <li><a href="/editathon?key=<%= key %>">Ediathon</a></li>
            <li><a href="javascript:void()" onclick="history.back()">Go back</a></li>
        </ul>
    </header>
</head>
<style></style>

<body>
    <div class="dashboard">
        <div class="savecancle">
            <button class="save">Save</button>
            <button class="cancel">Cancel</button>
        </div>
        <div class="settings">
            <div class="card">
                <h3>List Page</h3>
                <p class="values">Current Value: ABC</p>
                <input type="text" placeholder="Edit List Page">
            </div>
            <div class="card">
                <h3>Pre Condition</h3>
                <p class="values">Current Value: 123</p>
                <input type="number" value="50" placeholder="Edit Pre Condition">
            </div>
            <div class="card">
                <h3>Result</h3>
                <p class="values">Current Value: GHI</p>
                <input type="text" placeholder="Edit Result">
            </div>
            <div class="card">
                <h3>Jurries</h3>
                <p class="values">Current Value: XYZ</p>
                <textarea placeholder="Edit Jury Details" rows="3"></textarea>
            </div>
            <div class="card">
                <h3>Start and End Date and Time</h3>
                <p class="values">Start Date and Time</p>
                <div class="datetime"><input type="date" required>
                    <input type="time" required>
                </div>
                <p class="values">End Date and Time</p>
                <div class="datetime"><input type="date" required>
                    <input type="time" required>
                </div>
            </div>
        </div>
    </div>
</body>

<!-- <script src="test-dashboard.js"></script> -->
<script>
    document.addEventListener("DOMContentLoaded", function () {
        const inputs = document.querySelectorAll('.settings input, .settings textarea');
        const buttons = document.querySelector('.savecancle');
        const initialValues = new Map();

        // Store initial values on focus
        inputs.forEach(input => {
            input.addEventListener('focus', function () {
                if (!initialValues.has(input)) {
                    initialValues.set(input, input.value);
                }
            });

            // Check for changes on input
            input.addEventListener('input', function () {
                const initialValue = initialValues.get(input);
                if (input.value !== initialValue) {
                    buttons.style.display = 'flex';
                } else {
                    hideButtonsIfNoChanges();
                }
            });
        });

        document.querySelector('.save').addEventListener('click', function () {
            alert('Changes saved!');
            initialValues.clear(); // Clear stored values after saving
            hideButtons();
        });

        document.querySelector('.cancel').addEventListener('click', function () {
            inputs.forEach(input => {
                if (initialValues.has(input)) {
                    input.value = initialValues.get(input); // Revert to initial value
                }
            });
            hideButtons();
        });

        function hideButtons() {
            buttons.style.display = 'none';
        }

        function hideButtonsIfNoChanges() {
            const hasChanges = Array.from(inputs).some(input => {
                const initialValue = initialValues.get(input);
                return input.value !== initialValue;
            });
            if (!hasChanges) {
                hideButtons();
            }
        }

        // Initially hide buttons
        hideButtons();
    });

</script>

</html>